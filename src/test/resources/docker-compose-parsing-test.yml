services:
  api-gateway:
    image: api-gateway-service:latest
    ports:
      - 1234
      - 1235:80
      - 1200-1202
    environment:
      DB_PASSWORD: 123
      DB_USER: user
    healthcheck:
      test: curl --fail http://localhost:1234/health || exit 1
    labels:
      "org.jholsten.me2e.container-type": "MICROSERVICE"
      "org.jholsten.me2e.is-public": "true"

  auth-server:
    image: auth-server:1.3.0
    environment:
      ADMIN_PASSWORD: "secret"
    labels:
      "org.jholsten.me2e.container-type": "MICROSERVICE"
      "org.jholsten.me2e.is-public": "true"

  database:
    image: postgres:12
    environment:
      - DB_PASSWORD=123
      - DB_USER=user
    labels:
      - "org.jholsten.me2e.container-type=DATABASE"
      - "org.jholsten.me2e.database-type=POSTGRESQL"
